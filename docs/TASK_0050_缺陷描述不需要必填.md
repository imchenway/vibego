# /TASK_0050 缺陷描述不需要必填（YOLO）

## 0. 摘要
- 目标：在“报告缺陷（创建缺陷任务）”流程中，**缺陷描述改为可选**，不再强制必填。
- 结果：描述阶段新增“跳过”路径；确认创建时允许 `description=""`，并在确认摘要中用占位文案提示可后续补充。

---

## 1) vibe 阶段（需求调研/问题分析）

### 1.1 用户反馈（现象）
- 报告缺陷流程里，“缺陷描述”被要求必填，用户希望可以不填也能创建缺陷任务。

### 1.2 期望（用户视角）
- 只填写缺陷标题即可创建缺陷任务；描述可稍后补充。
- 如果用户先发了附件但暂时不想写描述，也应允许继续创建。

### 1.3 现状定位（可验证）
- 描述阶段提示为“必填”：`bot.py:11199`
- 描述阶段校验空值并阻止进入确认：`bot.py:11232`
- 确认创建阶段强校验 `description` 非空：`bot.py:11336`

---

## 2) design 阶段（开发设计 + 用例设计）

### 2.1 方案（最终实现 ✅）
- 描述阶段改为“可选”，提供“跳过”入口进入确认创建。
- 若未填写描述：
  - 仍可进入确认阶段；
  - 确认摘要中显示占位文案：`描述：暂无（可稍后通过 /task_desc 补充）`
  - 最终创建缺陷任务时写入空字符串描述（`description=""`）。

### 2.2 验收标准（AC）
1. 描述阶段允许点击/输入“跳过”，进入确认阶段。
2. 确认创建时允许描述为空，不会提示“会话失效”。
3. 描述为空时，确认摘要展示“暂无，可稍后补充”的提示。
4. 全量单测通过。

---

## 3) develop 阶段（需求开发/问题修复）

### 3.1 变更点
- `bot.py`
  - 描述阶段文案调整为“可选”，并使用带“跳过/取消”的键盘。
  - 描述 handler 支持识别“跳过”，并允许进入确认阶段（描述为空）。
  - 确认创建 handler 去除 `description` 必填校验。
- `tests/test_defect_report_flow.py`
  - 更新：描述阶段“附件先行”的用例断言为“提示可跳过”。
  - 新增：描述阶段“跳过进入确认”的用例。
  - 新增：确认创建允许空描述的用例。

---

## 4) 自测记录（可验证）

```bash
python3.11 -m pytest -q
```

结果：`536 passed`

