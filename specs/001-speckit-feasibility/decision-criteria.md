# Decision Criteria（决策标准）

**Date**: 2025-12-22  
**Feature**: `/Users/david/hypha/tools/vibego/specs/001-speckit-feasibility/`  
**Conventions**: `/Users/david/hypha/tools/vibego/specs/001-speckit-feasibility/conventions.md`

本文件用于把“是否集成/如何互补”的讨论变成可复核的决策过程，避免只凭主观偏好。

## 决策方式（推荐）

- 先做硬性门槛检查（Gate）：任一不通过则方案直接淘汰。
- 再做评分对比（Score）：用一致维度对比至少 2 个方案，得出推荐项与备选项。

## 1) Gate（硬性门槛，不可妥协）

1. **安全与隐私**：方案 MUST 不引入敏感信息明文输出、不得扩大 token 泄露面；并遵守
   `/Users/david/hypha/tools/vibego/specs/001-speckit-feasibility/conventions.md` 的脱敏规则。
2. **数据边界**：运行期数据 MUST 不落入仓库目录；必须留在配置根目录边界内。
3. **传输安全**：对外通信 MUST 使用 HTTPS/TLS（例如 Telegram Bot API）。
4. **幂等与可恢复**：关键动作必须可重复执行并能恢复（至少给出明确的恢复步骤）。

## 2) Score（评分维度与阈值）

评分建议：每项 0~3 分（0=不可接受，3=优秀），并给出理由与证据链接。

### A. 用户价值（权重：高）

衡量点：
- 是否显著降低“从需求到可执行计划”的沟通成本？
- 是否减少重复劳动（模板、结构、审阅节奏）？
- 是否能提升可预测性（更少返工、更清晰的验收）？

### B. 维护成本（权重：高）

衡量点：
- 对现有 vibego 代码/脚本的侵入程度
- 后续升级/同步成本（尤其是上游 Spec Kit 变化时）
- 文档与产物是否可长期维护（避免“用一次就废弃”）

### C. 兼容性与门槛（权重：中）

衡量点：
- 对使用者环境的额外要求（例如 Python 版本、额外工具）
- 是否能在不满足可选依赖时优雅降级
- 是否会引入跨平台不一致体验

### D. 可观测性与可诊断性（权重：中）

衡量点：
- 输出是否足够解释“发生了什么/下一步怎么做”
- 是否能快速定位失败原因（不需要翻代码）
- 是否能在不泄露敏感信息的前提下提供有效诊断

### E. 迭代与扩展性（权重：中）

衡量点：
- 是否支持分阶段落地（先 workflow、后自动化实现）
- 是否易于添加新产物（contracts/checklists/traceability）
- 是否能在不破坏已有流程的前提下扩展

## 3) 推荐判定（建议阈值）

- Gate 全通过为“可进入对比”的前提。
- Score 总分明显领先（例如 ≥2 个维度领先且无低于 1 分的维度）可作为推荐项。
- 若两方案总分接近，优先选择：
  1) 环境门槛更低  
  2) 与现有 vibego 能力耦合更少（更容易回滚/切换）  
  3) 迁移与退出成本更低
